@using battle_mate.Pages.BattleResult
@inherits LayoutComponentBase

<div class="page">
  <div class="main">
    <div class="top-row px-4">
      <NavLink class="nav-link px-1" href="/" Match="NavLinkMatch.All">
        <button class="btn btn-outline-primary">
          Combat result
        </button>
      </NavLink>

      <NavLink class="nav-link px-1" href="/dice" Match="NavLinkMatch.All">
        <button class="btn btn-outline-primary">
          Roll dice
        </button>
      </NavLink>
    </div>

    <div class="content px-4">
      @Body
    </div>
  </div>
</div>

@inject CombatResultState _state
@inject CombatOptionsRepository _repository

@code
{
  protected override async Task OnAfterRenderAsync(bool firstRender)
  {
    if (firstRender)
    {
      var options = await _repository.LoadOptions();
      _state.InitOptions(options);
    }
    await base.OnAfterRenderAsync(firstRender);
  }
}
